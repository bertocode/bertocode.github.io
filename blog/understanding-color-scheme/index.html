<!DOCTYPE html>
  <html lang="en">
  <head>
    <link rel="stylesheet" href="/style.css">
    
    <link rel="preload" href="/elm.js" as="script">
    <link rel="modulepreload" href="/index.js">
    
    <script defer="defer" src="/elm.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script type="module">
import userInit from"/index.js";
let prefetchedPages=[window.location.pathname],initialLocationHash=document.location.hash.replace(/^#/,"");function loadContentAndInitializeApp(){let a=window.location.pathname.replace(/(w)$/,"$1/");a.endsWith("/")||(a+="/");const b=Elm.TemplateModulesBeta.init({flags:{secrets:null,baseUrl:document.baseURI,isPrerendering:!1,isDevServer:!1,isElmDebugMode:!1,contentJson:JSON.parse(document.getElementById("__ELM_PAGES_DATA__").innerHTML),userFlags:userInit.flags()}});return b.ports.toJsPort.subscribe(()=>{loadNamedAnchor()}),b}function loadNamedAnchor(){if(""!==initialLocationHash){const a=document.querySelector(`[name=${initialLocationHash}]`);a&&a.scrollIntoView()}}function prefetchIfNeeded(a){if(a.host===window.location.host&&!prefetchedPages.includes(a.pathname)){prefetchedPages.push(a.pathname),console.log("Preloading...",a.pathname);const b=document.createElement("link");b.setAttribute("as","fetch"),b.setAttribute("rel","prefetch"),b.setAttribute("href",origin+a.pathname+"/content.json"),document.head.appendChild(b)}}const appPromise=new Promise(function(a){document.addEventListener("DOMContentLoaded",()=>{a(loadContentAndInitializeApp())})});userInit.load(appPromise),"function"==typeof connect&&connect(function(a){appPromise.then(b=>{b.ports.fromJsPort.send({contentJson:a})})});const trigger_prefetch=b=>{const c=find_anchor(b.target);c&&c.href&&c.hasAttribute("elm-pages:prefetch")&&prefetchIfNeeded(c)};let mousemove_timeout;const handle_mousemove=a=>{clearTimeout(mousemove_timeout),mousemove_timeout=setTimeout(()=>{trigger_prefetch(a)},20)};addEventListener("touchstart",trigger_prefetch),addEventListener("mousemove",handle_mousemove);function find_anchor(a){for(;a&&"A"!==a.nodeName.toUpperCase();)a=a.parentNode;return a}
    </script>
    <title>Understanding dark mode and prefers-color-scheme - bertocode</title>
    <meta name="generator" content="elm-pages v2.1.10">
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <link rel="canonical" href="https://elm-pages.com/blog/understanding-color-scheme" />    <meta name="description" content="TODO" />    <meta property="og:image" content="TODO" />    <meta property="og:image:secure_url" content="TODO" />    <meta property="og:image:alt" content="elm-pages logo" />    <meta property="og:title" content="Understanding dark mode and prefers-color-scheme" />    <meta property="og:url" content="https://elm-pages.com/blog/understanding-color-scheme" />    <meta property="og:description" content="TODO" />    <meta property="og:site_name" content="elm-pages" />    <meta property="twitter:card" content="summary" />    <meta property="twitter:title" content="Understanding dark mode and prefers-color-scheme" />    <meta property="twitter:description" content="TODO" />    <meta property="twitter:image" content="TODO" />    <meta property="twitter:image:alt" content="elm-pages logo" />    <meta property="og:type" content="website" />    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />
    <script id="__ELM_PAGES_DATA__" type="application/json">{"staticData":{"479282840":"{\"parsedFrontmatter\":{\"title\":\"Understanding dark mode and prefers-color-scheme\",\"tags\":[\"dark-mode\",\"javascript\",\"colours\"]},\"withoutFrontmatter\":\"\\n\\nWhen I started with the development of this web, I wanted to be able to toggle between dark and light theme. I was not very sure how it \\\"really\\\" worked, so decided to write the post to show the results of my findings.\\n\\nFirst thing I understood is that if you set up in the css a media query using, the `prefers-color-scheme` you can get the information from the user.\\nThis is if they prefer dark or light themes.\\n\\nI know that as a user you can set up some kind of preference from options of the browser, also to enforce it between the different browsers using the code inspector or developer tools.\\n\\nSo I asked myself, I can change this property using javascript, so I can directly read `prefers-color-scheme` and that's it.\\n\\nIt seems that not directly.\\nThere is not such a thing, my best guess, it is that for security reasons you would be updating attributes that would be read-only.\\n\\nBut there are some important things that can be spoken about:\\n- There is the possibility of using a meta tag color \\\"theme-color\\\" that allows in a limited amount of browsers to interact with the browser color, but it seems limited to PWA in chrome an iOS, Mac-Safari browsers [Can I use - Meta theme color](https://caniuse.com/meta-theme-color)\\n\\n- It's common that developers in case of the `prefer-color-scheme` is not supported nor set, they will default to the light theme.\\n\\n- It is also common, that after using  `prefers-color-scheme` query, there is some workaround using classes and/or css variables.\\n\\nLet's see some examples:\\n\\n- You can create [CSS custom properties/CSS variables](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) on the root element, setting the font-color and body color based on the class set to the html Element.\\n\\n```css\\n:root,\\n:root.dark {\\n\u00A0 --bg-color: #28003a;\\n\u00A0 --font-color: #fff;\\n}\\n\\n  \\n\\n:root.light {\\n\u00A0 --bg-color: #debaff;\\n\u00A0 --font-color: #000;\\n}\\n\\n  \\n\\nbody {\\n\u00A0 background-color: var(--bg-color);\\n\u00A0 color : var(--font-color);\\n}\\n```\\n\\n```js\\ndocument.querySelector('button').addEventListener('click',\\n\u00A0 () => document.documentElement.classList.toggle('light')\\n);\\n```\\n\\n [Example to toggle theme with variables](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5Eb2N1bWVudDwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg==|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KYm9keSB7DQogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsNCiAgY29sb3IgOiB2YXIoLS1mb250LWNvbG9yKTsNCn0=|ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLA0KICAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnbGlnaHQnKQ0KKTs=)\\n\\n- To the previous example, you can also add the media query, to always default to the user choice. We can add after the `root.light selector`:\\n\\n```css\\n@media (prefers-color-scheme:light){\\n\u00A0 :root {\\n\u00A0 \u00A0 --bg-color: #debaff;\\n\u00A0 \u00A0 --font-color: #000;\\n\u00A0 }\\n}\\n```\\n[Example to toggle theme with default for light theme](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5Eb2N1bWVudDwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg==|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTpsaWdodCl7DQogIDpyb290IHsNCiAgICAtLWJnLWNvbG9yOiAjZGViYWZmOw0KICAgIC0tZm9udC1jb2xvcjogIzAwMDsNCiAgfQ0KfQ0KDQpib2R5IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOw0KICBjb2xvciA6IHZhcigtLWZvbnQtY29sb3IpOw0KfQ==|ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLA0KICAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnbGlnaHQnKQ0KKTs=)\\n\\n- We can expand this decision by saving the user decision, once they have made the choice. We can use the LocalStorage API to achieve this. The css remains the same and now.\\n\\n```js\\nconst isLightMode = () => {\\n\u00A0 return (\\n\u00A0 \u00A0 localStorage.theme === \\\"light\\\" ||\\n\u00A0 \u00A0 (!(\\\"theme\\\" in localStorage) &&\\n\u00A0 \u00A0 \u00A0 window.matchMedia(\\\"(prefers-color-scheme: light)\\\").matches)\\n\u00A0 );\\n}\\n\\n  \\n\\nconst toggleTheme = () => {\\n\u00A0 if (isLightMode()) {\\n\u00A0 \u00A0 localStorage.setItem(\\\"theme\\\", \\\"dark\\\");\\n\u00A0 } else {\\n\u00A0 \u00A0 localStorage.setItem(\\\"theme\\\", \\\"light\\\");\\n\u00A0 }\\n\u00A0 applyLightModeClass()\\n}\\n\\n  \\n\\nconst applyLightModeClass = () => {\\n\u00A0 if (isLightMode()) {\\n\u00A0 \u00A0 document.documentElement.classList.add(\\\"light\\\")\\n\u00A0 \u00A0 document.documentElement.classList.remove(\\\"dark\\\")\\n\u00A0 } else {\\n\u00A0 \u00A0 document.documentElement.classList.remove(\\\"light\\\")\\n\u00A0 \u00A0 document.documentElement.classList.add(\\\"dark\\\")\\n\u00A0 }\\n}\\n\\n  \\n\\n// Button to change current theme\\ndocument.querySelector('button').addEventListener('click',\\n\u00A0 () => toggleTheme()\\n)\\n```\\n\\n[Example where toggle theme is stored in LocalStorage](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5FeGFtcGxlIGZvciBjb2xvciB0aGVtZTwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg0K|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTpsaWdodCl7DQogIDpyb290IHsNCiAgICAtLWJnLWNvbG9yOiAjZGViYWZmOw0KICAgIC0tZm9udC1jb2xvcjogIzAwMDsNCiB9DQp9DQoNCmJvZHkgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7DQogIGNvbG9yIDogdmFyKC0tZm9udC1jb2xvcik7DQp9|Y29uc3QgaXNMaWdodE1vZGUgPSAoKSA9PiB7DQogIHJldHVybiAoDQogICAgbG9jYWxTdG9yYWdlLnRoZW1lID09PSAibGlnaHQiIHx8DQogICAgKCEoInRoZW1lIiBpbiBsb2NhbFN0b3JhZ2UpICYmDQogICAgICB3aW5kb3cubWF0Y2hNZWRpYSgiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCkiKS5tYXRjaGVzKQ0KICApOw0KfQ0KDQpjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHsNCiAgaWYgKGlzTGlnaHRNb2RlKCkpIHsNCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGhlbWUiLCAiZGFyayIpOw0KICB9IGVsc2Ugew0KICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0aGVtZSIsICJsaWdodCIpOw0KICB9DQogIGFwcGx5TGlnaHRNb2RlQ2xhc3MoKQ0KfQ0KDQpjb25zdCBhcHBseUxpZ2h0TW9kZUNsYXNzID0gKCkgPT4gew0KICBpZiAoaXNMaWdodE1vZGUoKSkgew0KICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJsaWdodCIpDQogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImRhcmsiKQ0KICB9IGVsc2Ugew0KICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJsaWdodCIpDQogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoImRhcmsiKQ0KICB9DQp9DQoNCmFwcGx5TGlnaHRNb2RlQ2xhc3MoKQ0KDQovLyBCdXR0b24gdG8gY2hhbmdlIGN1cnJlbnQgdGhlbWUNCmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywNCiAgKCkgPT4gdG9nZ2xlVGhlbWUoKQ0KKQ==)\\n\\nInteresting link: https://webdesign.tutsplus.com/tutorials/color-schemes-with-css-variables-and-javascript--cms-36989\"}"},"is404":false,"path":"blog/understanding-color-scheme"}</script>
    </head>
    <body>
      <div data-url="" display="none"></div>
      <div><nav class="main-navbar"><a style="font-size:2.5rem;" href="/">bertocode</a><div class="main-navbar-right"><a href="#" tabIndex="0"><span class="material-symbols-rounded">light_mode</span></a><a href="/">Home</a><a href="/blog">Blog</a></div></nav><main><h1>Understanding dark mode and prefers-color-scheme</h1>

When I started with the development of this web, I wanted to be able to toggle between dark and light theme. I was not very sure how it "really" worked, so decided to write the post to show the results of my findings.

First thing I understood is that if you set up in the css a media query using, the `prefers-color-scheme` you can get the information from the user.
This is if they prefer dark or light themes.

I know that as a user you can set up some kind of preference from options of the browser, also to enforce it between the different browsers using the code inspector or developer tools.

So I asked myself, I can change this property using javascript, so I can directly read `prefers-color-scheme` and that's it.

It seems that not directly.
There is not such a thing, my best guess, it is that for security reasons you would be updating attributes that would be read-only.

But there are some important things that can be spoken about:
- There is the possibility of using a meta tag color "theme-color" that allows in a limited amount of browsers to interact with the browser color, but it seems limited to PWA in chrome an iOS, Mac-Safari browsers [Can I use - Meta theme color](https://caniuse.com/meta-theme-color)

- It's common that developers in case of the `prefer-color-scheme` is not supported nor set, they will default to the light theme.

- It is also common, that after using  `prefers-color-scheme` query, there is some workaround using classes and/or css variables.

Let's see some examples:

- You can create [CSS custom properties/CSS variables](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) on the root element, setting the font-color and body color based on the class set to the html Element.

```css
:root,
:root.dark {
  --bg-color: #28003a;
  --font-color: #fff;
}

  

:root.light {
  --bg-color: #debaff;
  --font-color: #000;
}

  

body {
  background-color: var(--bg-color);
  color : var(--font-color);
}
```

```js
document.querySelector('button').addEventListener('click',
  () => document.documentElement.classList.toggle('light')
);
```

 [Example to toggle theme with variables](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5Eb2N1bWVudDwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg==|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KYm9keSB7DQogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsNCiAgY29sb3IgOiB2YXIoLS1mb250LWNvbG9yKTsNCn0=|ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLA0KICAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnbGlnaHQnKQ0KKTs=)

- To the previous example, you can also add the media query, to always default to the user choice. We can add after the `root.light selector`:

```css
@media (prefers-color-scheme:light){
  :root {
    --bg-color: #debaff;
    --font-color: #000;
  }
}
```
[Example to toggle theme with default for light theme](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5Eb2N1bWVudDwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg==|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTpsaWdodCl7DQogIDpyb290IHsNCiAgICAtLWJnLWNvbG9yOiAjZGViYWZmOw0KICAgIC0tZm9udC1jb2xvcjogIzAwMDsNCiAgfQ0KfQ0KDQpib2R5IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOw0KICBjb2xvciA6IHZhcigtLWZvbnQtY29sb3IpOw0KfQ==|ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLA0KICAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnbGlnaHQnKQ0KKTs=)

- We can expand this decision by saving the user decision, once they have made the choice. We can use the LocalStorage API to achieve this. The css remains the same and now.

```js
const isLightMode = () => {
  return (
    localStorage.theme === "light" ||
    (!("theme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: light)").matches)
  );
}

  

const toggleTheme = () => {
  if (isLightMode()) {
    localStorage.setItem("theme", "dark");
  } else {
    localStorage.setItem("theme", "light");
  }
  applyLightModeClass()
}

  

const applyLightModeClass = () => {
  if (isLightMode()) {
    document.documentElement.classList.add("light")
    document.documentElement.classList.remove("dark")
  } else {
    document.documentElement.classList.remove("light")
    document.documentElement.classList.add("dark")
  }
}

  

// Button to change current theme
document.querySelector('button').addEventListener('click',
  () => toggleTheme()
)
```

[Example where toggle theme is stored in LocalStorage](https://codi.link/PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPg0KICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogIDx0aXRsZT5FeGFtcGxlIGZvciBjb2xvciB0aGVtZTwvdGl0bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPGgxPlRoaXMgaXMgYSBkYXJrLWxpZ2h0IGV4YW1wbGU8L2gxPg0KICA8YnV0dG9uPkNoYW5nZSB0aGVtZTwvYnV0dG9uPg0KPC9ib2R5Pg0KPC9odG1sPg0K|OnJvb3QsDQo6cm9vdC5kYXJrIHsNCiAgLS1iZy1jb2xvcjogIzI4MDAzYTsNCiAgLS1mb250LWNvbG9yOiAjZmZmOw0KfQ0KDQo6cm9vdC5saWdodCB7DQogIC0tYmctY29sb3I6ICNkZWJhZmY7DQogIC0tZm9udC1jb2xvcjogIzAwMDsNCn0NCg0KQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTpsaWdodCl7DQogIDpyb290IHsNCiAgICAtLWJnLWNvbG9yOiAjZGViYWZmOw0KICAgIC0tZm9udC1jb2xvcjogIzAwMDsNCiB9DQp9DQoNCmJvZHkgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7DQogIGNvbG9yIDogdmFyKC0tZm9udC1jb2xvcik7DQp9|Y29uc3QgaXNMaWdodE1vZGUgPSAoKSA9PiB7DQogIHJldHVybiAoDQogICAgbG9jYWxTdG9yYWdlLnRoZW1lID09PSAibGlnaHQiIHx8DQogICAgKCEoInRoZW1lIiBpbiBsb2NhbFN0b3JhZ2UpICYmDQogICAgICB3aW5kb3cubWF0Y2hNZWRpYSgiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCkiKS5tYXRjaGVzKQ0KICApOw0KfQ0KDQpjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHsNCiAgaWYgKGlzTGlnaHRNb2RlKCkpIHsNCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGhlbWUiLCAiZGFyayIpOw0KICB9IGVsc2Ugew0KICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0aGVtZSIsICJsaWdodCIpOw0KICB9DQogIGFwcGx5TGlnaHRNb2RlQ2xhc3MoKQ0KfQ0KDQpjb25zdCBhcHBseUxpZ2h0TW9kZUNsYXNzID0gKCkgPT4gew0KICBpZiAoaXNMaWdodE1vZGUoKSkgew0KICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJsaWdodCIpDQogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImRhcmsiKQ0KICB9IGVsc2Ugew0KICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJsaWdodCIpDQogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoImRhcmsiKQ0KICB9DQp9DQoNCmFwcGx5TGlnaHRNb2RlQ2xhc3MoKQ0KDQovLyBCdXR0b24gdG8gY2hhbmdlIGN1cnJlbnQgdGhlbWUNCmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywNCiAgKCkgPT4gdG9nZ2xlVGhlbWUoKQ0KKQ==)

Interesting link: https://webdesign.tutsplus.com/tutorials/color-schemes-with-css-variables-and-javascript--cms-36989</main></div>
    </body>
  </html>
  